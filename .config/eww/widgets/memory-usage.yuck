
(defvar colors '["green", "green", "yellow", "orange", "red"]')

(defwidget memory-usage []
  (overlay
    :tooltip "RAM usage"
    (donut
      :value {EWW_RAM.used_mem_perc}
      :thickness 20
      :style "color: ${colors[floor(EWW_RAM.used_mem_perc / 20)]};")
    (label
      :text "${floor(EWW_RAM.used_mem_perc)}%"
      :style "color: ${colors[floor(EWW_RAM.used_mem_perc / 20)]};")))
